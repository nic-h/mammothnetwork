* { box-sizing: border-box; font: var(--fs-12)/1.4 var(--font-mono); letter-spacing: .05em; }
html, body { height: 100%; }
body { margin: 0; background: var(--bg); color: var(--fg); display:grid; grid-template-rows: 40px 1fr; }
.header { display:grid; grid-template-columns: auto 1fr; align-items:center; gap:12px; padding:4px 20px; border-bottom:1px solid rgba(var(--green-rgb),.3); position: sticky; top: 0; z-index: 100; background: var(--bg); }
.logo { font-weight:700; }
.header-controls { display:grid; grid-template-columns: 1fr auto; grid-auto-rows: minmax(32px, auto); align-items:center; column-gap:12px; row-gap:6px; min-width:0; }
.preset-bar { display:flex; align-items:center; gap:8px; overflow-x:auto; padding: 4px 0; min-width:0; }
.header-controls .mode-chips { display:flex; align-items:center; gap:8px; flex-wrap:wrap; min-width:0; }
.header-controls .search-wrapper { grid-column: 2; grid-row: 1; justify-self:end; display:flex; align-items:center; gap:6px; }
.header-controls .preset-bar { grid-column: 1 / span 2; grid-row: 2; }
.preset-bar::-webkit-scrollbar{ height:6px }
.preset-bar::-webkit-scrollbar-thumb{ background: rgba(var(--green-rgb),.25) }
.header .preset-btn,
.header select,
.header input[type="search"],
.header .clear-btn { height: 32px; line-height: 32px; }
.preset-btn i { font-size: 14px; margin-right: 6px; vertical-align: -2px; }
.clear-btn { background: var(--bg); color: var(--fg); border: 1px solid rgba(var(--green-rgb),.2); padding: 0 10px; cursor: pointer; }
.main-container {
  display: grid;
  grid-template-columns: var(--col-left) 1fr var(--col-right);
  height: calc(100vh - 40px);
}
.controls-min { display:flex; align-items:center; gap:16px; flex:1; }
.controls-min label { margin-right: 12px; color: var(--fg); }
.controls-min select, .controls-min input[type="search"], .left-panel select, .left-panel input[type="search"] { background: var(--bg); color: var(--fg); border: var(--border); padding:4px 6px; outline:none; }
.left-panel select { appearance:none; -webkit-appearance:none; -moz-appearance:none; padding-right: 28px; background: var(--bg); color: var(--fg); border: var(--border); }
.mode-selector { position: relative; display:flex; align-items:center; gap:8px; }
.mode-selector .select-caret { position:absolute; right:8px; pointer-events:none; color: var(--fg); font-size: 18px; }
@media (min-width: 901px){ .mode-selector { display:none; } }
.header-search { background: var(--bg); color: var(--fg); border: var(--border); padding:6px 12px; outline:none; width:280px; }
.header-search::placeholder { color: rgba(var(--green-rgb),.6); font-size:11px; }
.presets { display:flex; gap:8px; }
.preset-btn { background: var(--bg); color: var(--fg); border: var(--border); padding:4px 8px; cursor:pointer; font-size:10px; }
.preset-btn i { font-size:12px; vertical-align:middle; }
.preset-btn:hover { background: rgba(var(--green-rgb),.1); }
.preset-btn.active { background: var(--fg); color:#000; }
.shell { display:grid; grid-template-columns: 280px 1fr 420px; height:100%; overflow:hidden; }
.left-panel { border-right:1px solid rgba(var(--green-rgb),.2); padding:16px; overflow:auto; width:var(--col-left); }
.panel-title { color:rgba(var(--green-rgb),.6); margin:12px 0 6px; }
#traits-container { display:block; }
.trait-group { margin-bottom: 6px; border-bottom:1px solid rgba(0,255,102,.05); }
.trait-header { color: var(--fg); font-weight:700; padding:2px 0; font-size:10px; cursor:pointer; display:flex; align-items:center; gap:6px; }
.trait-header .twist { display:inline-block; width:8px; text-align:center; opacity:.6; }
.trait-values { display:none; margin:4px 0 8px; }
.trait-value { padding:2px 4px; cursor:pointer; font-size:10px; display:flex; justify-content:space-between; }
.trait-value:hover { background:rgba(var(--green-rgb),.1); }
.trait-value.active { background:rgba(var(--green-rgb),.2); color:var(--fg); }
.trait-count { opacity:.5; }
#stage { width:100%; height:100%; display:block; background: var(--bg); }
.center-panel { overflow:hidden; padding: 16px; }
.right-panel { width:var(--col-right); border-left:1px solid rgba(var(--green-rgb),.2); padding:16px; overflow:auto; }
.right-panel #details { word-break: break-all; overflow-wrap: anywhere; }
.right-panel img#thumb { width:256px; max-width:100%; display:block; margin:0 auto 12px; border:1px solid rgba(var(--green-rgb),.2); }
.right-panel .grid { display:grid; grid-template-columns: 100px 1fr; gap:4px 8px; }
.right-panel .label { opacity:.75; font-size:10px; color:rgba(var(--green-rgb),.7); text-transform:uppercase; }
.panel-title { font-weight:700; font-size:14px; color: var(--fg); text-transform:uppercase; }
.section-label { font-size:10px; color:#68d694; text-transform:uppercase; opacity:.8; margin:8px 0 4px; }
.big-number { font-weight:700; font-size:14px; color: var(--fg); text-transform:none; }
.data-value { font-size:12px; color:#d7ffd7; }
.small-meta { font-size:9px; color:#7dd9a3; }
.card2 { display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin:10px 0; }
.card { border:1px solid rgba(var(--green-rgb),.15); padding:8px; background:#0a0a0a; }
.token-title { font-weight:700; font-size:14px; color: var(--fg); text-transform:uppercase; display:flex; justify-content:space-between; align-items:center; }
.token-close { cursor:pointer; border:1px solid rgba(var(--green-rgb),.3); padding:0 6px; height:18px; line-height:18px; }
.ens-name { font-weight:500; font-size:14px; color:#fff; }
.address { font-family: var(--font-mono); font-size:11px; color:#9eecb9; }
.traits-table { display:grid; grid-template-columns: 1fr 1fr; gap:4px 8px; border:1px solid rgba(var(--green-rgb),.1); padding:8px; }
.chip-row { display:flex; flex-wrap:wrap; gap:6px; }
.chip { border:1px solid rgba(var(--green-rgb),.3); padding:2px 6px; font-size:10px; cursor:pointer; }
.legend { font-size:10px; opacity:.8; color: var(--fg-dim); margin-left:4px; }

/* Detail panel text normalization */
.right-panel .ens-name,
.right-panel .address,
.right-panel .data-value,
.right-panel .small-meta { text-transform:none; }

/* Brand form controls */
input[type="checkbox"] { accent-color: var(--fg); }
.layer-toggle input[type="checkbox"] {
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  width: 16px; height: 16px; border: 1px solid var(--fg); background: transparent; position: relative; cursor: pointer;
}
.layer-toggle input[type="checkbox"]:checked { background: rgba(var(--green-rgb), .15); }
.layer-toggle input[type="checkbox"]:checked::after {
  content: '\2713'; position: absolute; left: 50%; top: 50%; transform: translate(-50%,-58%); color: var(--fg); font-size: 12px; line-height: 1;
}
.edge-controls input[type=range] {
  width: 180px;
  appearance: none; height: 6px; background: rgba(var(--green-rgb), .25); border: var(--border);
}
.edge-controls input[type=range]::-webkit-slider-thumb { appearance:none; width:14px; height:14px; border-radius:50%; background: var(--fg); border: 1px solid rgba(0,0,0,.6); box-shadow: 0 0 8px rgba(var(--green-rgb),.35); margin-top: -4px; }
.edge-controls input[type=range]::-moz-range-thumb { width:14px; height:14px; border-radius:50%; background: var(--fg); border: 1px solid rgba(0,0,0,.6); box-shadow: 0 0 8px rgba(var(--green-rgb),.35); }
.edge-controls input[type=range]::-webkit-slider-runnable-track { height:6px; background: rgba(var(--green-rgb), .25); }
.edge-controls input[type=range]::-moz-range-track { height:6px; background: rgba(var(--green-rgb), .25); }

@media (max-width: 1200px){
  .header { grid-template-columns: auto 1fr; }
  .header-controls { grid-template-columns: 1fr; }
  .header-controls .search-wrapper { grid-column: 1; grid-row: 3; justify-self: stretch; }
  .header-controls .preset-bar { grid-column: 1; grid-row: 2; }
  .header-search { width: 100%; }
}

@media (max-width: 900px){
  .preset-bar { max-width: 100%; gap:6px; }
  .preset-btn { padding: 2px 6px; font-size: 10px; }
  .mode-chips { gap:6px; display:none; }
  .chip-btn { padding: 2px 6px; font-size: 10px; }
  .main-container { grid-template-columns: 1fr; height: auto; }
  .right-panel { width:auto; }
}

@media (max-width: 600px){
  .preset-bar { gap:4px; }
.mode-chips { display:flex; align-items:center; gap:8px; flex-wrap:wrap; margin-right: 12px; }
.chip-btn { background: var(--bg); color: var(--fg); border: var(--border); padding: 4px 8px; height: 32px; line-height: 22px; cursor:pointer; display:flex; align-items:center; gap:6px; }
.chip-btn i { font-size: 14px; }
.chip-btn.active { background: var(--fg); color:#000; box-shadow: 0 0 12px rgba(var(--green-rgb), .35); }
.chip-btn .chip-label { display:inline; }
.left-panel .controls-section { display:flex; flex-direction:column; gap:10px; }
.layer-toggles { display:flex; flex-direction:column; gap:10px; }
.edge-controls { display:flex; align-items:center; gap:10px; }
  .preset-btn { padding: 2px 4px; }
  .preset-btn .preset-label { display:none; }
  .preset-btn i { margin-right: 0; }
  .chip-btn { padding: 2px 4px; }
  .chip-btn .chip-label { display:none; }
}

/* Layer toggle active outline */
.layer-toggle { display:flex; align-items:center; justify-content: space-between; gap:8px; padding: 4px 6px; border: 1px solid transparent; border-radius: 4px; }
.layer-toggle.active { border-color: var(--fg); box-shadow: 0 0 8px rgba(var(--green-rgb), .25); }
.right-panel #details { word-break: break-all; overflow-wrap: anywhere; }

/* Intermediate layout breakpoint for tablets */
@media (max-width: 1024px){
  .main-container { grid-template-columns: 240px 1fr 360px; }
  .center-panel { padding: var(--pad-12); }
}

/* Consolidated button patterns */
.preset-btn, .chip-btn, .clear-btn {
  background: var(--bg); color: var(--fg); border: var(--border);
  padding: var(--pad-4) var(--pad-8); cursor:pointer;
}
.preset-btn:hover, .chip-btn:hover, .clear-btn:hover { background: rgba(var(--green-rgb), .1); }
.preset-btn.active, .chip-btn.active { background: var(--fg); color:#000; box-shadow: 0 0 12px rgba(var(--green-rgb), .35); }
