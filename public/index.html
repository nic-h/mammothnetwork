<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAMMOTHS NETWORK</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <!-- PIXI served from /lib; preconnect not required -->
  <link rel="stylesheet" href="/client/styles/tokens.css?v=20250912-1">
  <link rel="stylesheet" href="/style.css?v=20250912-1">
</head>
<body>
  <header class="header">
    <div class="logo">MAMMOTH.NETWORK</div>
    <div class="header-controls">
      <div class="mode-chips" aria-label="Modes">
        <button class="btn btn--chip chip-btn" data-mode="holders" title="Holders"><i class="ri-node-tree"></i><span class="chip-label"> HOLDERS</span></button>
        <button class="btn btn--chip chip-btn" data-mode="transfers" title="Transfers"><i class="ri-exchange-line"></i><span class="chip-label"> TRANSFERS</span></button>
        <button class="btn btn--chip chip-btn" data-mode="traits" title="Traits"><i class="ri-shape-2-line"></i><span class="chip-label"> TRAITS</span></button>
        <button class="btn btn--chip chip-btn" data-mode="wallets" title="Wallets"><i class="ri-wallet-3-line"></i><span class="chip-label"> WALLETS</span></button>
      </div>
      <div class="presets preset-bar" aria-label="Presets">
        <button class="btn btn--preset preset-btn" data-preset="ownership" title="Ownership"><i class="ri-links-line"></i><span class="preset-label"> OWNERSHIP</span></button>
        <button class="btn btn--preset preset-btn" data-preset="trading" title="Trading"><i class="ri-line-chart-line"></i><span class="preset-label"> TRADING</span></button>
        <button class="btn btn--preset preset-btn" data-preset="rarity" title="Rarity"><i class="ri-star-line"></i><span class="preset-label"> RARITY</span></button>
        <button class="btn btn--preset preset-btn" data-preset="social" title="Social"><i class="ri-user-3-line"></i><span class="preset-label"> SOCIAL</span></button>
        <button class="btn btn--preset preset-btn" data-preset="whales" title="Whales"><i class="ri-team-line"></i><span class="preset-label"> WHALES</span></button>
        <button class="btn btn--preset preset-btn" data-preset="frozen" title="Frozen"><i class="ri-snowflake-line"></i><span class="preset-label"> FROZEN</span></button>
      </div>
      <div class="more">
        <button id="more-btn" class="btn btn--chip tooltipped" title="More" data-tooltip="MORE" aria-haspopup="menu" aria-expanded="false" aria-controls="more-panel"><i class="ri-more-2-fill"></i></button>
        <div id="more-panel" class="more-panel" role="menu" hidden>
          <button class="menu-item" role="menuitem" tabindex="-1" data-action="scroll" data-target="edges">EDGE LAYERS</button>
          <button class="menu-item" role="menuitem" tabindex="-1" data-action="scroll" data-target="traits">TRAITS</button>
          <button class="menu-item" role="menuitem" tabindex="-1" data-action="ambient">AMBIENT EDGES</button>
        </div>
      </div>
      <!-- View selector moved to left panel -->
      <div class="search-wrapper">
        <input id="search" type="search" placeholder="TOKEN ID OR ADDRESS" class="header-search">
        <button id="clear-search" class="btn btn--clear clear-btn tooltipped" title="Clear (ESC)" data-tooltip="CLEAR">✕</button>
      </div>
    </div>
  </header>
  <div class="main-container">
    <aside class="left-panel">
      <div class="controls-section">
        <div class="view-selector panel-view" aria-label="Views">
          <label for="view" class="panel-title">VIEW</label>
          <div class="view-tabs" role="tablist" aria-label="Views">
            <button class="tab-btn" data-view="ownership" role="tab">OWNERSHIP</button>
            <button class="tab-btn" data-view="trading" role="tab">TRADING</button>
            <button class="tab-btn" data-view="traits" role="tab">TRAITS</button>
            <button class="tab-btn" data-view="whales" role="tab">WHALES</button>
            <button class="tab-btn" data-view="health" role="tab">HEALTH</button>
          </div>
          <select id="view" aria-label="Views" class="sr-only" tabindex="-1" aria-hidden="true" style="position:absolute;left:-9999px;">
            <option value="ownership">OWNERSHIP NETWORK</option>
            <option value="trading">TRADING ACTIVITY</option>
            <option value="traits">TRAIT EXPLORER</option>
            <option value="whales">WHALE WATCH</option>
            <option value="health">COLLECTION HEALTH</option>
          </select>
        </div>
        <div class="mode-selector">
          <label for="mode">MODE</label>
          <select id="mode">
            <option value="holders">HOLDERS</option>
            <option value="transfers">TRANSFERS</option>
            <option value="traits">TRAITS</option>
            <option value="wallets">WALLETS</option>
          </select>
        </div>
        <div class="edge-controls">
          <label>EDGES</label>
          <input type="range" id="edges-slider" min="0" max="500" value="200">
          <span id="edge-count">200</span>
        </div>
        <div class="layer-toggles" style="margin-top: var(--pad-12);">
          <h4>DISPLAY</h4>
          <div class="layer-toggle"><label>Ambient Edges</label><input type="checkbox" id="ambient-edges" checked></div>
          <div class="layer-toggle"><label>Whale Bubbles</label><input type="checkbox" id="layer-bubbles" checked></div>
          <div class="layer-toggle"><label>Wash Watch</label><input type="checkbox" id="layer-wash"></div>
          <div class="layer-toggle"><label>Desire Paths</label><input type="checkbox" id="layer-desire"></div>
        </div>
        <!-- Focus removed -->
        <div class="legend" id="legend">Color by owner; same-owner links.</div>
        <div class="edge-groups">
          <div class="edge-group open" data-group="relationships">
            <div class="edge-group-header" role="button" tabindex="0" aria-expanded="true" aria-controls="relationships-body">RELATIONSHIPS <span class="twist">▶</span></div>
            <div id="relationships-body" class="edge-group-body">
              <div class="layer-toggle"><label>Ownership</label><input type="checkbox" id="layer-ownership" checked></div>
              <div class="layer-toggle"><label>Rare Traits</label><input type="checkbox" id="layer-traits"></div>
            </div>
          </div>
          <div class="edge-group open" data-group="transactions">
            <div class="edge-group-header" role="button" tabindex="0" aria-expanded="true" aria-controls="transactions-body">TRANSACTIONS <span class="twist">▶</span></div>
            <div id="transactions-body" class="edge-group-body">
              <div class="layer-toggle"><label>Recent Trades</label><input type="checkbox" id="layer-trades" checked></div>
              <div class="layer-toggle"><label>Sales</label><input type="checkbox" id="layer-sales" checked></div>
              <div class="layer-toggle"><label>Transfers</label><input type="checkbox" id="layer-transfers" checked></div>
              <div class="layer-toggle"><label>Mints</label><input type="checkbox" id="layer-mints" checked></div>
            </div>
          </div>
          <div class="edge-group" data-group="analysis">
            <div class="edge-group-header" role="button" tabindex="0" aria-expanded="false" aria-controls="analysis-body">ANALYSIS <span class="twist">▶</span></div>
            <div id="analysis-body" class="edge-group-body">
              <div class="layer-toggle"><label>High Value</label><input type="checkbox" id="layer-value"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="traits-section">
        <div class="panel-title traits-header" role="button" tabindex="0" aria-expanded="false" aria-controls="traits-body"><span class="twist">▶</span> TRAITS</div>
        <div id="traits-body" class="traits-body">
          <button id="clear-filters" class="btn btn--preset preset-btn" style="width:100%;margin-bottom: var(--pad-12);">CLEAR FILTERS</button>
          <div id="traits-container"></div>
        </div>
      </div>
    </aside>
    <div class="center-panel"><canvas id="stage"></canvas></div>
    <aside class="right-panel" id="sidebar">
      <img id="thumb" alt="thumb" style="display:none">
      <div id="details">Select a node…</div>
    </aside>
  </div>
  <!-- Deck.gl UMD (used when engine=deck) -->
  <script src="https://unpkg.com/deck.gl@8.9.24/dist.min.js"></script>
  <!-- Geo-layers (TripsLayer, etc.) -->
  <script src="https://unpkg.com/@deck.gl/geo-layers@8.9.24/dist.min.js"></script>
  <script src="/viewport.js?v=20250912-1"></script>
  <script src="/engine.js?v=20250912-1"></script>
</body>
</html>
