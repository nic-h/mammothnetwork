<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="app-build" content="20250919-2">
  <title>mammoths.network</title>
  <link rel="stylesheet" href="/client/styles/fonts.css?v=20250919-2">
  <!-- Deck.gl UMD loaded below; no PIXI -->
  <link rel="stylesheet" href="/client/styles/tokens.css?v=20250919-2">
  <link rel="stylesheet" href="/style.css?v=20250919-2">
</head>
<body>
  <div class="ui-root">
  <header class="header">
    <div id="top-loader" class="top-loader" hidden></div>
    <div class="logo-wrap">
      <button id="panel-toggle" type="button" aria-label="Toggle toolbox" aria-controls="left-panel" aria-expanded="true">☰</button>
      <div class="logo">mammoths.network</div>
    </div>
    <div class="header-actions">
      <label class="sr-only" for="search">Search token, ENS name, or 0x wallet address</label>
      <input
        id="search"
        type="search"
        class="tooltipped"
        placeholder="Search token ID / ENS / 0x wallet"
        aria-label="Search token, ENS name, or 0x wallet address"
        autocomplete="off"
        spellcheck="false"
        title="Search token, ENS, or wallet"
      >
    </div>
  </header>
  <div class="main-container">
    <aside class="left-panel panel" id="left-panel">
      <div class="controls-section">
        <!-- VIEW at top; header left-aligned like others -->
        <div class="view-selector panel-view" aria-label="Views" style="margin-bottom: var(--pad-12);">
          <label class="panel-title" style="text-align:left;" for="view">VIEW</label>
          <select id="view" aria-label="Views" hidden>
            <option value="dots">DOTS — OWNERSHIP STATE</option>
            <option value="flow">FLOW — MARKET FLOWS</option>
            <option value="tree">TREE — LIFECYCLE</option>
            <option value="rhythm">RHYTHM — TIME × PRICE</option>
          </select>
          <div class="view-buttons" id="view-buttons" role="group" aria-label="Views">
            <button type="button" class="view-btn active" data-view-btn="dots">DOTS — OWNERSHIP STATE</button>
            <button type="button" class="view-btn" data-view-btn="flow">FLOW — MARKET FLOWS</button>
            <button type="button" class="view-btn" data-view-btn="tree">TREE — LIFECYCLE</button>
            <button type="button" class="view-btn" data-view-btn="rhythm">RHYTHM — TIME × PRICE</button>
          </div>
          <div class="layer-toggle" id="cluster-mode-row" hidden>
            <label>Cluster mode</label><input type="checkbox" id="dots-cluster-mode">
          </div>
        </div>
        <div class="mode-selector" hidden>
          <label for="mode">MODE</label>
          <select id="mode">
            <option value="holders">HOLDERS</option>
            <option value="transfers">TRANSFERS</option>
            <option value="traits">TRAITS</option>
            <option value="wallets">WALLETS</option>
          </select>
        </div>
        <div class="edge-controls" data-ctrl="edges">
          <label data-ctrl-label>LINK DENSITY</label>
          <input type="range" id="edges-slider" min="0" max="500" value="200">
          <span id="edge-count">200</span>
        </div>
        <div class="edge-controls" id="time-controls" data-ctrl="time" style="margin-top: var(--pad-12);" hidden>
          <label data-ctrl-label>TIME</label>
          <input type="range" id="time-slider" min="0" max="100" value="100">
          <span id="time-label"></span>
        </div>
        <div class="layer-toggles" style="margin-top: var(--pad-12);">
          <h4>DISPLAY</h4>
          <div class="layer-toggle"><label>Ambient Edges</label><input type="checkbox" id="ambient-edges"></div>
          <div class="layer-toggle"><label>Whale Bubbles</label><input type="checkbox" id="layer-bubbles"></div>
          <div class="colors">
            <div><span class="sw sw--active"></span>Active</div>
            <div><span class="sw sw--whale"></span>Whale</div>
            <div><span class="sw sw--frozen"></span>Frozen</div>
            <div><span class="sw sw--dormant"></span>Dormant</div>
          </div>
        </div>
        
        <!-- Focus removed -->
        <!-- legend removed (dynamic UI already conveys meaning) -->
        <div class="edge-groups">
          <div class="edge-group" data-group="relationships">
            <div class="edge-group-header" role="button" tabindex="0" aria-expanded="false" aria-controls="relationships-body">RELATIONSHIPS <span class="twist">▶</span></div>
            <div id="relationships-body" class="edge-group-body">
              <div class="layer-toggle"><label>Ownership</label><input type="checkbox" id="layer-ownership"></div>
              <div class="layer-toggle"><label>Rare Traits</label><input type="checkbox" id="layer-traits"></div>
            </div>
          </div>
          <div class="edge-group" data-group="transactions">
            <div class="edge-group-header" role="button" tabindex="0" aria-expanded="false" aria-controls="transactions-body">TRANSACTIONS <span class="twist">▶</span></div>
            <div id="transactions-body" class="edge-group-body">
              <div class="layer-toggle"><label>Recent Trades</label><input type="checkbox" id="layer-trades"></div>
              <div class="layer-toggle"><label>Sales</label><input type="checkbox" id="layer-sales"></div>
              <div class="layer-toggle"><label>Transfers</label><input type="checkbox" id="layer-transfers"></div>
              <div class="layer-toggle"><label>Mints</label><input type="checkbox" id="layer-mints"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="traits-section">
        <div class="panel-title traits-header" role="button" tabindex="0" aria-expanded="false" aria-controls="traits-body">TRAITS <span class="twist">▶</span></div>
        <div id="traits-body" class="traits-body">
          <button id="clear-filters" class="btn btn--preset preset-btn" style="width:100%;margin-bottom: var(--pad-12);">CLEAR FILTERS</button>
          <div id="traits-container"></div>
        </div>
      </div>
    </aside>
    <div class="center-panel"></div>
    <aside class="right-panel panel" id="sidebar">
      <div class="sidebar-empty" id="sidebar-empty">Select a node…</div>
      <div class="sidebar-body hidden" id="sidebar-body">
        <img id="thumb" alt="thumb" class="sidebar-thumb" style="display:none">
        <div class="token-header">
          <div class="token-id" id="sb-id"></div>
          <div class="token-name" id="sb-name"></div>
        </div>
        <div class="meta-grid" id="sb-meta">
          <div><span class="label">Owner</span><span class="value" id="sb-owner">—</span></div>
          <div><span class="label">Sales</span><span class="value" id="sb-sales">—</span></div>
          <div><span class="label">Last Sale</span><span class="value" id="sb-last-sale">—</span></div>
          <div><span class="label">Hold Days</span><span class="value" id="sb-hold">—</span></div>
        </div>

        <section id="sb-ethos" class="sidebar-section hidden">
          <div class="section-header">Ethos</div>
          <div class="ethos-row">
            <span class="label">Score</span>
            <span class="mono" id="sb-ethos-score"></span>
          </div>
          <div class="ethos-tags" id="sb-ethos-tags"></div>
          <div class="section-text" id="sb-ethos-blurb"></div>
        </section>

        <section id="sb-story" class="sidebar-section hidden">
          <div class="section-header">Story</div>
          <div class="section-text" id="sb-story-text"></div>
        </section>

        <section class="sidebar-section">
          <div class="section-header">Traits</div>
          <div id="sb-traits" class="traits-grid"></div>
        </section>

        <section id="sb-desc" class="sidebar-section hidden">
          <div class="section-header">Description</div>
          <div class="section-text" id="sb-desc-text"></div>
        </section>
      </div>
    </aside>
  </div>
  </div>
  <!-- Engine loader (dynamically imports Three bundle) -->
  <script src="/engine.js?v=20250919-2"></script>
</body>
</html>
